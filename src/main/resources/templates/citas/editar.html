<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Editar Cita</title>
</head>
<body>
<h1>Editar Cita</h1>

<form action="/citas/editar" method="post">
    <input type="hidden" th:name="id" th:value="${cita.id}">

    <label for="paciente">Paciente:</label>
    <input type="text" id="paciente" name="paciente" th:value="${cita.paciente}" required><br>

    <label for="doctor">Doctor:</label>
    <select id="doctor" name="doctor.id" required>
        <option th:each="doctor : ${doctores}"
                th:value="${doctor.id}"
                th:text="${doctor.nombre}">
        th:selected="${doctor.id == cita.doctor.id}"></option>
    </select><br>

    <label for="consultorio">Consultorio:</label>
    <select id="consultorio" name="consultorio.id" required>
        <option th:each="consultorio : ${consultorios}"
                th:value="${consultorio.id}"
                th:text="${consultorio.numero}"
                th:selected="${consultorio.id == cita.consultorio.id}"></option>
    </select><br>

    <label for="horario">Hora:</label>
    <input type="datetime-local" id="horario" name="horario"
           th:value="${#dates.format(cita.horario, 'yyyy-MM-dd''T''HH:mm')}" required><br>

    <button type="submit">Actualizar Cita</button>
</form>

<div th:if="${error}">
    <p style="color: red;" th:text="${error}"></p>
</div>

<br>
<a href="/citas">Volver a la lista de citas</a>
</body>
</html>
